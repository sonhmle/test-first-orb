description: >
  This command echos "Hello World" using file inclusion.
# What will this command do?
# Descriptions should be short, simple, and clear.
parameters:
  to:
    type: env_var_name
    default: TO_NAME
    description: "Hello to whom?"
  # and:
  #   type: string
  #   default: $AND_NAME
  #   description: "another name yeah"
  # branch:
  #   type: string
  #   default: $CIRCLE_BRANCH
  #   description: "The branch to use"
  channel:
    description: |
      Select which channel in which to post to. Channel name or ID will work. You may include a comma separated list of channels if you wish to post to multiple channels at once. Set the "SLACK_DEFAULT_CHANNEL" environment variable for the default channel.
    type: string
    default: $SLACK_DEFAULT_CHANNEL
steps:
  # - run:
  #     name: Hello Greeting
  #     command: <<include(scripts/greet.sh)>>
  - run:
      name: export value
      command: |
        echo 'export TO_PARAM=$<<parameters.to>>' >> $BASH_ENV
        echo 'export IT_BRANCH=$CIRCLE_BRANCH' >> $BASH_ENV
        echo 'export SLACK_PARAM_CHANNEL=<<parameters.channel>>' >> $BASH_ENV
  - run:
      when: always
      name: Slack - Sending Notification
      command: <<include(scripts/notify.sh)>>
